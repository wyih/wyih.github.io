<!DOCTYPE html>
<html lang="en-us">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Source Themes Academic 4.5.0">

  

  
  
  
  
  
    
    
    
  
  

  <meta name="author" content="Yihong WANG">

  
  
  
    
  
  <meta name="description" content="Chapter 2 Chapter 3 Wrong way to set color Aesthetics Can Be Mapped per Geom Save plots  Chapter 4 Group data and the “Group” Aesthetic Facet to make small multiples Geoms can transform data Histgrams and Density Plots Avoid Transformations When Necessary    Chapter 2 geom_point
p &lt;- ggplot(data = gapminder, mapping = aes(x = gdpPercap, y = lifeExp)) p &#43; geom_point()  Chapter 3 geom_smooth">

  
  <link rel="alternate" hreflang="en-us" href="/post/test/">

  


  
  
  
  <meta name="theme-color" content="#4caf50">
  

  
  
  
  
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css" integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.0/css/all.css" integrity="sha384-aOkxzJ5uQz7WBObEZcHvV5JvRW3TUc2rNPA7pe3AwnsUohiw1Vj2Rgx2KSOkF5+h" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.css" integrity="sha256-ygkqlh3CYSUri3LhQxzdcm0n1EQvH2Y+U5S2idbLtxs=" crossorigin="anonymous">

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/github.min.css" crossorigin="anonymous" title="hl-light">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" disabled>
        
      
    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.2.0/leaflet.css" integrity="sha512-M2wvCLH6DSRazYeZRIm1JnYyh22purTM+FDB5CsyxtQJYeKq83arPe5wgbNmcFXGqiSH2XR8dT/fJISVA1r/zQ==" crossorigin="anonymous">
    

    

  

  
  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:400,700%7CRoboto:400,400italic,700%7CRoboto+Mono&display=swap">
  

  
  
  
  <link rel="stylesheet" href="/css/academic.min.4a2804b4d4c4cd4583bb17ba271d35ae.css">

  

  




  


  

  <link rel="manifest" href="/index.webmanifest">
  <link rel="icon" type="image/png" href="/img/icon-32.png">
  <link rel="apple-touch-icon" type="image/png" href="/img/icon-192.png">

  <link rel="canonical" href="/post/test/">

  
  
  
  
    
    
  
  
  <meta property="twitter:card" content="summary">
  
  <meta property="og:site_name" content="Little World">
  <meta property="og:url" content="/post/test/">
  <meta property="og:title" content="Data Visualization Chapter 2-4 | Little World">
  <meta property="og:description" content="Chapter 2 Chapter 3 Wrong way to set color Aesthetics Can Be Mapped per Geom Save plots  Chapter 4 Group data and the “Group” Aesthetic Facet to make small multiples Geoms can transform data Histgrams and Density Plots Avoid Transformations When Necessary    Chapter 2 geom_point
p &lt;- ggplot(data = gapminder, mapping = aes(x = gdpPercap, y = lifeExp)) p &#43; geom_point()  Chapter 3 geom_smooth"><meta property="og:image" content="/img/icon-192.png">
  <meta property="twitter:image" content="/img/icon-192.png"><meta property="og:locale" content="en-us">
  
    
      <meta property="article:published_time" content="2019-09-26T00:00:00&#43;00:00">
    
    <meta property="article:modified_time" content="2019-09-26T00:02:42&#43;08:00">
  

  


    






  






<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "/post/test/"
  },
  "headline": "Data Visualization Chapter 2-4",
  
  "datePublished": "2019-09-26T00:00:00Z",
  "dateModified": "2019-09-26T00:02:42+08:00",
  
  "author": {
    "@type": "Person",
    "name": "Yihong WANG"
  },
  
  "publisher": {
    "@type": "Organization",
    "name": "Little World",
    "logo": {
      "@type": "ImageObject",
      "url": "/img/icon-512.png"
    }
  },
  "description": "Chapter 2 Chapter 3 Wrong way to set color Aesthetics Can Be Mapped per Geom Save plots  Chapter 4 Group data and the “Group” Aesthetic Facet to make small multiples Geoms can transform data Histgrams and Density Plots Avoid Transformations When Necessary    Chapter 2 geom_point\np \u0026lt;- ggplot(data = gapminder, mapping = aes(x = gdpPercap, y = lifeExp)) p + geom_point()  Chapter 3 geom_smooth"
}
</script>

  

  


  


  





  <title>Data Visualization Chapter 2-4 | Little World</title>

</head>

<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" >

  <aside class="search-results" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Search..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search">
        
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>


  
<nav class="navbar navbar-light fixed-top navbar-expand-lg py-0 compensate-for-scrollbar" id="navbar-main">
  <div class="container">

    
      <a class="navbar-brand" href="/">Little World</a>
      
      <button type="button" class="navbar-toggler" data-toggle="collapse"
              data-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
        <span><i class="fas fa-bars"></i></span>
      </button>
      

    
    <div class="collapse navbar-collapse" id="navbar">

      
      
      <ul class="navbar-nav mr-auto">
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#posts"><span>Posts</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#contact"><span>Contact</span></a>
        </li>

        
        

      
      </ul>
      <ul class="navbar-nav ml-auto">
      

        

        
        <li class="nav-item">
          <a class="nav-link js-search" href="#"><i class="fas fa-search" aria-hidden="true"></i></a>
        </li>
        

        

        
        <li class="nav-item">
          <a class="nav-link js-dark-toggle" href="#"><i class="fas fa-moon" aria-hidden="true"></i></a>
        </li>
        

      </ul>

    </div>
  </div>
</nav>


  <article class="article">

  












  

  
  
  
<div class="article-container pt-3">
  <h1>Data Visualization Chapter 2-4</h1>

  

  
    



<div class="article-metadata">

  
  

  
  <span class="article-date">
    
    
      
          Last updated on
      
    
    Sep 26, 2019
  </span>
  

  

  
  <span class="middot-divider"></span>
  <span class="article-reading-time">
    7 min read
  </span>
  

  
  
  

  
  
  <span class="middot-divider"></span>
  <span class="article-categories">
    <i class="fas fa-folder mr-1"></i><a href="/categories/r/">R</a>, <a href="/categories/books/">Books</a></span>
  

  
    
<div class="share-box" aria-hidden="true">
  <ul class="share">
    
      
      
      
        
      
      
      
      <li>
        <a href="https://twitter.com/intent/tweet?url=/post/test/&amp;text=Data%20Visualization%20Chapter%202-4" target="_blank" rel="noopener" class="share-btn-twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.facebook.com/sharer.php?u=/post/test/&amp;t=Data%20Visualization%20Chapter%202-4" target="_blank" rel="noopener" class="share-btn-facebook">
          <i class="fab fa-facebook-f"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="mailto:?subject=Data%20Visualization%20Chapter%202-4&amp;body=/post/test/" target="_blank" rel="noopener" class="share-btn-email">
          <i class="fas fa-envelope"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.linkedin.com/shareArticle?url=/post/test/&amp;title=Data%20Visualization%20Chapter%202-4" target="_blank" rel="noopener" class="share-btn-linkedin">
          <i class="fab fa-linkedin-in"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://web.whatsapp.com/send?text=Data%20Visualization%20Chapter%202-4%20/post/test/" target="_blank" rel="noopener" class="share-btn-whatsapp">
          <i class="fab fa-whatsapp"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://service.weibo.com/share/share.php?url=/post/test/&amp;title=Data%20Visualization%20Chapter%202-4" target="_blank" rel="noopener" class="share-btn-weibo">
          <i class="fab fa-weibo"></i>
        </a>
      </li>
    
  </ul>
</div>


  

</div>

    














  
</div>



  <div class="article-container">

    <div class="article-style">
      

<div id="TOC">
<ul>
<li><a href="#chapter-2">Chapter 2</a></li>
<li><a href="#chapter-3">Chapter 3</a><ul>
<li><a href="#wrong-way-to-set-color">Wrong way to set color</a></li>
<li><a href="#aesthetics-can-be-mapped-per-geom">Aesthetics Can Be Mapped per Geom</a></li>
<li><a href="#save-plots">Save plots</a></li>
</ul></li>
<li><a href="#chapter-4">Chapter 4</a><ul>
<li><a href="#group-data-and-the-group-aesthetic">Group data and the “Group” Aesthetic</a></li>
<li><a href="#facet-to-make-small-multiples">Facet to make small multiples</a></li>
<li><a href="#geoms-can-transform-data">Geoms can transform data</a></li>
<li><a href="#histgrams-and-density-plots">Histgrams and Density Plots</a></li>
<li><a href="#avoid-transformations-when-necessary">Avoid Transformations When Necessary</a></li>
</ul></li>
</ul>
</div>

<div id="chapter-2" class="section level2">
<h2>Chapter 2</h2>
<p><code>geom_point</code></p>
<pre class="r"><code>p &lt;- ggplot(data = gapminder,
            mapping = aes(x = gdpPercap, y = lifeExp))
p + geom_point()</code></pre>
<p><img src="/post/2019-09-26-Data-Visualization-Chapter-2-4_files/figure-html/cars-1.png" width="768" /></p>
</div>
<div id="chapter-3" class="section level2">
<h2>Chapter 3</h2>
<p><code>geom_smooth</code></p>
<pre><code>## `geom_smooth()` using method = &#39;gam&#39; and formula &#39;y ~ s(x, bs = &quot;cs&quot;)&#39;</code></pre>
<p><img src="/post/2019-09-26-Data-Visualization-Chapter-2-4_files/figure-html/pressure-1.png" width="768" /></p>
<pre class="r"><code>p &lt;- ggplot(data = gapminder, mapping = aes(x = gdpPercap, y = lifeExp))
p + geom_point() + geom_smooth()</code></pre>
<pre><code>## `geom_smooth()` using method = &#39;gam&#39; and formula &#39;y ~ s(x, bs = &quot;cs&quot;)&#39;</code></pre>
<p><img src="/post/2019-09-26-Data-Visualization-Chapter-2-4_files/figure-html/unnamed-chunk-1-1.png" width="768" /></p>
<p><code>scale_x_log10</code></p>
<pre class="r"><code>p &lt;- ggplot(data = gapminder, mapping = aes(x = gdpPercap, y = lifeExp))
p + geom_point() + geom_smooth(method = &quot;gam&quot;) + scale_x_log10()</code></pre>
<p><img src="/post/2019-09-26-Data-Visualization-Chapter-2-4_files/figure-html/unnamed-chunk-2-1.png" width="768" /></p>
<p><code>scales::dollar</code></p>
<pre class="r"><code>p &lt;- ggplot(data = gapminder, mapping = aes(x = gdpPercap, y = lifeExp))
p + geom_point() +
geom_smooth(method = &quot;gam&quot;) +
scale_x_log10(labels = scales::dollar)</code></pre>
<p><img src="/post/2019-09-26-Data-Visualization-Chapter-2-4_files/figure-html/unnamed-chunk-3-1.png" width="768" /></p>
<div id="wrong-way-to-set-color" class="section level3">
<h3>Wrong way to set color</h3>
<pre class="r"><code>p &lt;- ggplot(data = gapminder, mapping = aes(x = gdpPercap, y = lifeExp,
color = &quot;purple&quot;))
p + geom_point() + geom_smooth(method = &quot;loess&quot;) + scale_x_log10()</code></pre>
<p><img src="/post/2019-09-26-Data-Visualization-Chapter-2-4_files/figure-html/unnamed-chunk-4-1.png" width="768" /></p>
<p>The <code>aes()</code> function is for mappings only. Do not use it to change properties to a particular value. If we want to set a property, we do it in the geom_ we are using, and outside the <code>mapping =aes(...)</code>step.</p>
<pre class="r"><code>p &lt;- ggplot(data = gapminder, mapping = aes(x = gdpPercap, y = lifeExp))
p + geom_point(color = &quot;purple&quot;) + geom_smooth(method = &quot;loess&quot;) + scale_x_log10()</code></pre>
<p><img src="/post/2019-09-26-Data-Visualization-Chapter-2-4_files/figure-html/unnamed-chunk-5-1.png" width="768" />
The various <code>geom_</code> functions can take many other arguments that will affect how the plot looks but do not involve mapping variables to aesthetic elements.
“alpha” is an aesthetic property that points (and some other plot elements) have, and to which variables can be mapped. It controls how transparent the object will appear when drawn. It’s measured on a scale of zero to one.</p>
<pre class="r"><code>p &lt;- ggplot(data = gapminder, mapping = aes(x = gdpPercap, y = lifeExp))
p + geom_point(alpha = 0.3) + geom_smooth(color = &quot;orange&quot;, se = FALSE,
                                          size = 8, method = &quot;lm&quot;) + scale_x_log10()</code></pre>
<p><img src="/post/2019-09-26-Data-Visualization-Chapter-2-4_files/figure-html/unnamed-chunk-6-1.png" width="768" /></p>
<pre class="r"><code>p &lt;- ggplot(data = gapminder, mapping = aes(x = gdpPercap, y=lifeExp))
p + geom_point(alpha = 0.3) +
  geom_smooth(method = &quot;gam&quot;) +
  scale_x_log10(labels = scales::dollar) +
  labs(x = &quot;GDP Per Capita&quot;, y = &quot;Life Expectancy in Years&quot;,
       title = &quot;Economic Growth and Life Expectancy&quot;,
       subtitle = &quot;Data points are country-years&quot;,
       caption = &quot;Source: Gapminder.&quot;)</code></pre>
<p><img src="/post/2019-09-26-Data-Visualization-Chapter-2-4_files/figure-html/unnamed-chunk-7-1.png" width="768" /></p>
<pre class="r"><code>p &lt;- ggplot(data = gapminder, mapping = aes(x = gdpPercap, y = lifeExp,
                                            color = continent))
p + geom_point() + geom_smooth(method = &quot;loess&quot;) + scale_x_log10()</code></pre>
<p><img src="/post/2019-09-26-Data-Visualization-Chapter-2-4_files/figure-html/unnamed-chunk-8-1.png" width="768" />
The color of the standard error ribbon is controlled by the fill aesthetic.</p>
<pre class="r"><code>p &lt;- ggplot(data = gapminder, mapping = aes(x = gdpPercap, y = lifeExp,
                                            color = continent, fill = continent))
p + geom_point() + geom_smooth(method = &quot;loess&quot;) + scale_x_log10()</code></pre>
<p><img src="/post/2019-09-26-Data-Visualization-Chapter-2-4_files/figure-html/unnamed-chunk-9-1.png" width="768" /></p>
</div>
<div id="aesthetics-can-be-mapped-per-geom" class="section level3">
<h3>Aesthetics Can Be Mapped per Geom</h3>
<pre class="r"><code>p &lt;- ggplot(data = gapminder, mapping = aes(x = gdpPercap, y = lifeExp))
p + geom_point(mapping = aes(color = factor(year))) + 
  geom_smooth(method = &quot;loess&quot;) +
  scale_x_log10()</code></pre>
<p><img src="/post/2019-09-26-Data-Visualization-Chapter-2-4_files/figure-html/unnamed-chunk-10-1.png" width="768" /></p>
<p>Order doesn’t matter!!!
Besides <code>scale_x_log10()</code>, you can try <code>scale_x_sqrt()</code> and <code>scale_x_reverse()</code></p>
<pre class="r"><code>p &lt;- ggplot(data = gapminder, mapping = aes(x = pop, y = lifeExp))
p + geom_smooth(method = &quot;loess&quot;) + 
  geom_point(mapping = aes(color = continent)) + 
  scale_x_reverse(labels = scales::number)</code></pre>
<p><img src="/post/2019-09-26-Data-Visualization-Chapter-2-4_files/figure-html/unnamed-chunk-11-1.png" width="768" /></p>
<pre class="r"><code>p &lt;- ggplot(data = gapminder, mapping = aes(x = gdpPercap, y = lifeExp))
p + geom_point(mapping = aes(color = log(pop))) + scale_x_log10()</code></pre>
<p><img src="/post/2019-09-26-Data-Visualization-Chapter-2-4_files/figure-html/unnamed-chunk-12-1.png" width="768" /></p>
</div>
<div id="save-plots" class="section level3">
<h3>Save plots</h3>
<pre class="r"><code>p_out &lt;-  p + geom_point() + geom_smooth(method = &quot;loess&quot;) + scale_x_log10()
ggsave(&quot;my_figure.pdf&quot;, plot = p_out)</code></pre>
</div>
</div>
<div id="chapter-4" class="section level2">
<h2>Chapter 4</h2>
<div id="group-data-and-the-group-aesthetic" class="section level3">
<h3>Group data and the “Group” Aesthetic</h3>
<pre class="r"><code>p &lt;- ggplot(data = gapminder, mapping = aes(x = year, y = gdpPercap))
p + geom_line()</code></pre>
<p><img src="/post/2019-09-26-Data-Visualization-Chapter-2-4_files/figure-html/unnamed-chunk-14-1.png" width="768" />
use the <code>group</code> aesthetic to tell ggplot explicitly about this country-level structure</p>
<pre class="r"><code>p &lt;- ggplot(data = gapminder, mapping = aes(x = year, y = gdpPercap))
p + geom_line(aes(group = country))</code></pre>
<p><img src="/post/2019-09-26-Data-Visualization-Chapter-2-4_files/figure-html/unnamed-chunk-15-1.png" width="768" /></p>
</div>
<div id="facet-to-make-small-multiples" class="section level3">
<h3>Facet to make small multiples</h3>
<p>use <code>facet_wrap()</code> to split our plot by <code>continent</code>.</p>
<pre class="r"><code>p &lt;- ggplot(data = gapminder, mapping = aes(x = year, y = gdpPercap))
p + geom_line(aes(group = country)) + facet_wrap(~continent)</code></pre>
<p><img src="/post/2019-09-26-Data-Visualization-Chapter-2-4_files/figure-html/unnamed-chunk-16-1.png" width="768" />
Add another enhancements</p>
<pre class="r"><code>p &lt;- ggplot(data = gapminder, mapping = aes(x = year, y = gdpPercap))
p + geom_line(color=&quot;gray70&quot;, aes(group = country)) + 
  geom_smooth(size= 1.1, method = &quot;loess&quot;, se = FALSE) +
  scale_y_log10(labels=scales::dollar) +
  facet_wrap(~continent , ncol = 5) +
  labs(x = &quot;Year&quot;,
       y = &quot;GDP per capita on Five Continents&quot;)</code></pre>
<p><img src="/post/2019-09-26-Data-Visualization-Chapter-2-4_files/figure-html/unnamed-chunk-17-1.png" width="768" /></p>
<p>Use <code>facet_grid</code></p>
<pre class="r"><code>p &lt;- ggplot(data = gss_sm, mapping = aes(x = age, y = childs))
p + geom_point(alpha = 0.2) +
  geom_smooth() + 
  facet_grid(sex ~ race)</code></pre>
<pre><code>## `geom_smooth()` using method = &#39;gam&#39; and formula &#39;y ~ s(x, bs = &quot;cs&quot;)&#39;</code></pre>
<pre><code>## Warning: Removed 18 rows containing non-finite values (stat_smooth).</code></pre>
<pre><code>## Warning: Removed 18 rows containing missing values (geom_point).</code></pre>
<p><img src="/post/2019-09-26-Data-Visualization-Chapter-2-4_files/figure-html/unnamed-chunk-18-1.png" width="768" /></p>
<pre class="r"><code>p &lt;- ggplot(data = gss_sm, mapping = aes(x = age, y = childs))
p + geom_point(alpha = 0.2) +
  geom_smooth() + 
  facet_grid(sex ~ race + degree)</code></pre>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<pre><code>## Warning: Removed 18 rows containing non-finite values (stat_smooth).</code></pre>
<pre><code>## Warning in simpleLoess(y, x, w, span, degree = degree, parametric =
## parametric, : span too small. fewer data values than degrees of freedom.</code></pre>
<pre><code>## Warning in simpleLoess(y, x, w, span, degree = degree, parametric =
## parametric, : pseudoinverse used at 62.87</code></pre>
<pre><code>## Warning in simpleLoess(y, x, w, span, degree = degree, parametric =
## parametric, : neighborhood radius 2.13</code></pre>
<pre><code>## Warning in simpleLoess(y, x, w, span, degree = degree, parametric =
## parametric, : reciprocal condition number 0</code></pre>
<pre><code>## Warning in simpleLoess(y, x, w, span, degree = degree, parametric =
## parametric, : There are other near singularities as well. 582.26</code></pre>
<pre><code>## Warning in predLoess(object$y, object$x, newx = if
## (is.null(newdata)) object$x else if (is.data.frame(newdata))
## as.matrix(model.frame(delete.response(terms(object)), : span too small.
## fewer data values than degrees of freedom.</code></pre>
<pre><code>## Warning in predLoess(object$y, object$x, newx = if
## (is.null(newdata)) object$x else if (is.data.frame(newdata))
## as.matrix(model.frame(delete.response(terms(object)), : pseudoinverse used
## at 62.87</code></pre>
<pre><code>## Warning in predLoess(object$y, object$x, newx = if
## (is.null(newdata)) object$x else if (is.data.frame(newdata))
## as.matrix(model.frame(delete.response(terms(object)), : neighborhood radius
## 2.13</code></pre>
<pre><code>## Warning in predLoess(object$y, object$x, newx = if
## (is.null(newdata)) object$x else if (is.data.frame(newdata))
## as.matrix(model.frame(delete.response(terms(object)), : reciprocal
## condition number 0</code></pre>
<pre><code>## Warning in predLoess(object$y, object$x, newx = if
## (is.null(newdata)) object$x else if (is.data.frame(newdata))
## as.matrix(model.frame(delete.response(terms(object)), : There are other
## near singularities as well. 582.26</code></pre>
<pre><code>## Warning: Removed 18 rows containing missing values (geom_point).</code></pre>
<p><img src="/post/2019-09-26-Data-Visualization-Chapter-2-4_files/figure-html/unnamed-chunk-19-1.png" width="768" /></p>
</div>
<div id="geoms-can-transform-data" class="section level3">
<h3>Geoms can transform data</h3>
<pre class="r"><code>p &lt;- ggplot(data = gss_sm, mapping = aes(x = bigregion))
p + geom_bar()</code></pre>
<p><img src="/post/2019-09-26-Data-Visualization-Chapter-2-4_files/figure-html/unnamed-chunk-20-1.png" width="768" /></p>
<p><code>geom_bar</code> called the default <code>stat_</code> function associated with it,<code>stat_count()</code>.</p>
<pre class="r"><code>p &lt;- ggplot(data = gss_sm, mapping = aes(x = bigregion))
p + geom_bar(mapping = aes(y = ..prop..))</code></pre>
<p><img src="/post/2019-09-26-Data-Visualization-Chapter-2-4_files/figure-html/unnamed-chunk-21-1.png" width="768" /></p>
<pre class="r"><code>p &lt;- ggplot(data = gss_sm, mapping = aes(x = bigregion))
p + geom_bar(mapping = aes(y = ..prop.., group = 1))</code></pre>
<p><img src="/post/2019-09-26-Data-Visualization-Chapter-2-4_files/figure-html/unnamed-chunk-22-1.png" width="768" /></p>
<pre class="r"><code>table(gss_sm$religion)</code></pre>
<pre><code>## 
## Protestant   Catholic     Jewish       None      Other 
##       1371        649         51        619        159</code></pre>
<pre class="r"><code>p &lt;- ggplot(data = gss_sm, mapping = aes(x = religion, color = religion))
p + geom_bar()</code></pre>
<p><img src="/post/2019-09-26-Data-Visualization-Chapter-2-4_files/figure-html/unnamed-chunk-24-1.png" width="768" /></p>
<pre class="r"><code>p &lt;- ggplot(data = gss_sm, mapping = aes(x = religion, fill = religion))
p + geom_bar() + guides(fill = FALSE)</code></pre>
<p><img src="/post/2019-09-26-Data-Visualization-Chapter-2-4_files/figure-html/unnamed-chunk-24-2.png" width="768" /></p>
<pre class="r"><code>p + geom_bar()</code></pre>
<p><img src="/post/2019-09-26-Data-Visualization-Chapter-2-4_files/figure-html/unnamed-chunk-24-3.png" width="768" /></p>
<pre class="r"><code>p &lt;- ggplot(data = gss_sm, mapping = aes(x = bigregion, fill = religion))
p + geom_bar()</code></pre>
<p><img src="/post/2019-09-26-Data-Visualization-Chapter-2-4_files/figure-html/unnamed-chunk-25-1.png" width="768" /></p>
<pre class="r"><code>p &lt;- ggplot(data = gss_sm, mapping = aes(x = bigregion, fill = religion))
p + geom_bar(position = &quot;fill&quot;)</code></pre>
<p><img src="/post/2019-09-26-Data-Visualization-Chapter-2-4_files/figure-html/unnamed-chunk-26-1.png" width="768" /></p>
<p>if you want separate bars</p>
<pre class="r"><code>p &lt;- ggplot(data = gss_sm, mapping = aes(x = bigregion, fill = religion))
p + geom_bar(position = &quot;dodge&quot;, mapping = aes(y = ..prop..,
                                               group = religion))</code></pre>
<p><img src="/post/2019-09-26-Data-Visualization-Chapter-2-4_files/figure-html/unnamed-chunk-27-1.png" width="768" />
However, they don’t sum to one within each region. They sum to one across regions.</p>
<pre class="r"><code>p &lt;- ggplot(data = gss_sm, mapping = aes(x = religion))
p + geom_bar(position = &quot;dodge&quot;, mapping = aes(y = ..prop..,
                                               group = bigregion)) +
  facet_wrap(~bigregion, ncol=1)</code></pre>
<p><img src="/post/2019-09-26-Data-Visualization-Chapter-2-4_files/figure-html/unnamed-chunk-28-1.png" width="768" /></p>
</div>
<div id="histgrams-and-density-plots" class="section level3">
<h3>Histgrams and Density Plots</h3>
<pre class="r"><code>p &lt;- ggplot(data = midwest, mapping = aes( x = area))
p + geom_histogram()</code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="/post/2019-09-26-Data-Visualization-Chapter-2-4_files/figure-html/unnamed-chunk-29-1.png" width="768" /></p>
<pre class="r"><code>p &lt;- ggplot(data = midwest, mapping = aes( x = area))
p + geom_histogram(bins = 10)</code></pre>
<p><img src="/post/2019-09-26-Data-Visualization-Chapter-2-4_files/figure-html/unnamed-chunk-30-1.png" width="768" /></p>
<pre class="r"><code>oh_wi &lt;- c(&quot;OH&quot;, &quot;WI&quot;)
p &lt;- ggplot(data = subset(midwest, subset = state %in% oh_wi),
            mapping = aes(x = percollege, fill = state))
p + geom_histogram(alpha = 0.4, bins = 20)</code></pre>
<p><img src="/post/2019-09-26-Data-Visualization-Chapter-2-4_files/figure-html/unnamed-chunk-31-1.png" width="768" /></p>
<pre class="r"><code>p &lt;- ggplot(data = midwest, mapping = aes( x = area))
p + geom_density()</code></pre>
<p><img src="/post/2019-09-26-Data-Visualization-Chapter-2-4_files/figure-html/unnamed-chunk-32-1.png" width="768" /></p>
<pre class="r"><code>p &lt;- ggplot(data = midwest, mapping = aes( x = area, fill = state,
                                           color = state))
p + geom_density(alpha = 0.3)</code></pre>
<p><img src="/post/2019-09-26-Data-Visualization-Chapter-2-4_files/figure-html/unnamed-chunk-33-1.png" width="768" /></p>
</div>
<div id="avoid-transformations-when-necessary" class="section level3">
<h3>Avoid Transformations When Necessary</h3>
<pre class="r"><code>p &lt;- ggplot(data = titanic, mapping = aes(x = fate, y = percent,
                                          fill = sex))
p + geom_bar(position = &quot;dodge&quot;, stat = &quot;identity&quot;) + theme(legend.position = &quot;top&quot;)</code></pre>
<p><img src="/post/2019-09-26-Data-Visualization-Chapter-2-4_files/figure-html/unnamed-chunk-34-1.png" width="768" /></p>
<pre class="r"><code>p &lt;- ggplot(data = oecd_sum,
            mapping = aes(x = year, y = diff, fill = hi_lo))
p + geom_col() + guides(fill = FALSE) + 
  labs(x = NULL, y = &quot;Difference in Years&quot;,
       title = &quot;The US Life Expectancy Gap&quot;,
       subtitle = &quot;Difference between US and OECD 
       average life expectancies, 1960-2015&quot;,
       caption = &quot;Data: OECD. After a chart by Christopher Ingraham,
       Washington Post, December 27th 2017.&quot;)</code></pre>
<pre><code>## Warning: Removed 1 rows containing missing values (position_stack).</code></pre>
<p><img src="/post/2019-09-26-Data-Visualization-Chapter-2-4_files/figure-html/unnamed-chunk-35-1.png" width="768" /></p>
</div>
</div>

    </div>

    


    

<div class="article-tags">
  
  <a class="badge badge-light" href="/tags/socviz/">socviz</a>
  
</div>



    
      








  






  
  
  
    
  
  
  <div class="media author-card">
    
      
      <img class="portrait mr-3" src="/authors/admin/avatar_hu52a603635ecebd45650b162dadabb4e5_12861_250x250_fill_q90_lanczos_center.jpg" alt="Avatar">
    

    <div class="media-body">
      <h5 class="card-title"><a href="/">Yihong WANG</a></h5>
      
      <p class="card-text">Wayfaring Stranger</p>
      <ul class="network-icon" aria-hidden="true">
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="/#contact" >
        <i class="fas fa-envelope"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://github.com/wyih" target="_blank" rel="noopener">
        <i class="fab fa-github"></i>
      </a>
    </li>
  
</ul>

    </div>
  </div>



      
      
      <div class="article-widget">
        <div class="hr-light"></div>
        <h3>Related</h3>
        <ul>
          
          <li><a href="/post/data-vis-chapter-6/">Data Vis Chapter 6</a></li>
          
          <li><a href="/post/data-visualization-chapter-5/">Data Visualization Chapter 5</a></li>
          
        </ul>
      </div>
      
    

    

    


  </div>
</article>

      

    
    
    
    <script src="/js/mathjax-config.js"></script>
    

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.js" integrity="sha256-X5PoE3KU5l+JcX+w09p/wHl9AzK333C4hJ2I9S5mD4M=" crossorigin="anonymous"></script>

      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/8.0.0/mermaid.min.js" integrity="sha256-0w92bcB21IY5+rGI84MGj52jNfHNbXVeQLrZ0CGdjNY=" crossorigin="anonymous" title="mermaid"></script>
      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js" integrity="sha256-aYTdUrn6Ow1DDgh5JTc3aDGnnju48y/1c8s1dgkYPQ8=" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/languages/r.min.js"></script>
        
      

      
      
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS_CHTML-full" integrity="sha256-GhM+5JHb6QUzOQPXSJLEWP7R73CbkisjzK5Eyij4U9w=" crossorigin="anonymous" async></script>
      
    

    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.2.0/leaflet.js" integrity="sha512-lInM/apFSqyy1o6s89K4iQUKg6ppXEgsVxT35HbzUupEVRh2Eu9Wdl4tHj7dZO0s1uvplcYGmt3498TtHq+log==" crossorigin="anonymous"></script>
    

    
    
    <script>hljs.initHighlightingOnLoad();</script>
    

    
    
    <script>
      const search_index_filename = "/index.json";
      const i18n = {
        'placeholder': "Search...",
        'results': "results found",
        'no_results': "No results found"
      };
      const content_type = {
        'post': "Posts",
        'project': "Projects",
        'publication' : "Publications",
        'talk' : "Talks"
        };
    </script>
    

    
    

    
    
    <script id="search-hit-fuse-template" type="text/x-template">
      <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
      </div>
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>
    

    
    

    
    

    
    
    
    
    
    
    
    
    
      
    
    
    
    
    <script src="/js/academic.min.0bf1e3db85cbb232372ed31d6f10dc70.js"></script>

    






  
  <div class="container">
    <footer class="site-footer">
   
  <p class="powered-by">
    &copy;Yihong WANG 2019 &middot; 

    Powered by the
    <a href="https://sourcethemes.com/academic/" target="_blank" rel="noopener">Academic theme</a> for
    <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a>.

    
    <span class="float-right" aria-hidden="true">
      <a href="#" class="back-to-top">
        <span class="button_icon">
          <i class="fas fa-chevron-up fa-2x"></i>
        </span>
      </a>
    </span>
    
  </p>
</footer>

  </div>
  

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

</body>
</html>
